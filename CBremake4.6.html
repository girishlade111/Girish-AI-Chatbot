<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Girish Lade Chatbot</title>
  <style>
    :root {
      --primary-color: #10a37f;
      --secondary-color: #343541;
      --dark-color: #202123;
      --text-color: #ececf1;
      --border-color: #4d4d4f;
      --hover-color: #2a2b32;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
    }
    body {
      background: var(--secondary-color);
      color: var(--text-color);
      height: 100vh;
      overflow-x: hidden;
      overflow-y: auto;
    }

    .anime-bg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      opacity: 0.15;
      background: radial-gradient(circle at center, #5c59c9 0%, #2c3e50 100%);
      overflow: hidden;
    }

    .anime-bg::before,
    .anime-bg::after {
      content: '';
      position: absolute;
      width: 150%;
      height: 150%;
      background: linear-gradient(#ff2c55, #ff7b55, #ffca86);
      animation: rotate 15s linear infinite;
      top: -25%;
      left: -25%;
      opacity: 0.2;
      will-change: transform;
      transform: translateZ(0);
    }

    .anime-bg::after {
      background: linear-gradient(#2cb2ff, #2c6eff, #2c2fff);
      animation: rotate 12s linear infinite reverse;
    }

    @keyframes rotate {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .container {
      display: flex;
      height: 100vh;
      overflow: hidden;
    }

    .sidebar {
      width: 260px;
      background-color: var(--dark-color);
      border-right: 1px solid var(--border-color);
      padding: 10px;
      display: flex;
      flex-direction: column;
      transition: all 0.3s ease;
    }

    .sidebar-collapsed {
      width: 0;
      padding: 0;
      overflow: hidden;
    }

    .new-chat-btn,
    .clear-history-btn {
      display: flex;
      align-items: center;
      gap: 10px;
      background-color: transparent;
      border: 1px solid var(--border-color);
      border-radius: 5px;
      color: var(--text-color);
      padding: 12px;
      font-size: 14px;
      cursor: pointer;
      transition: background-color 0.3s;
      width: 100%;
      margin-bottom: 10px;
    }

    .new-chat-btn:hover,
    .clear-history-btn:hover {
      background-color: var(--hover-color);
    }

    .suggestion-title {
      font-size: 12px;
      color: #7d7d82;
      margin: 10px 0;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .suggestions {
      margin-bottom: 20px;
    }

    .suggestion-btn {
      width: 100%;
      text-align: left;
      background-color: transparent;
      border: none;
      color: var(--text-color);
      padding: 10px;
      font-size: 14px;
      border-radius: 5px;
      cursor: pointer;
      margin-bottom: 8px;
      transition: background-color 0.3s;
    }

    .suggestion-btn:hover {
      background-color: var(--hover-color);
    }

    .main {
      flex: 1;
      display: flex;
      flex-direction: column;
      height: 100%;
      position: relative;
      overflow: hidden;
    }

    .toggle-sidebar {
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 101;
      background: transparent;
      border: none;
      color: var(--text-color);
      cursor: pointer;
      font-size: 20px;
      padding: 5px;
      border-radius: 4px;
    }

    .toggle-sidebar:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }

    .chat-header {
      text-align: center;
      padding: 20px;
      font-size: 28px;
      font-weight: bold;
      letter-spacing: 1px;
    }

    .chat-container {
      flex: 1;
      padding: 20px 10%;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 20px;
      scroll-behavior: smooth;
      overscroll-behavior: contain;
    }

    .empty-chat {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
      text-align: center;
      padding: 0 20px;
    }

    .empty-chat h2 {
      font-size: 28px;
      margin-bottom: 20px;
    }

    .empty-chat p {
      font-size: 16px;
      color: #8e8ea0;
      max-width: 600px;
      margin-bottom: 40px;
    }

    .feature-buttons {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-top: 20px;
    }

    .feature-button {
      background-color: transparent;
      border: 1px solid var(--border-color);
      border-radius: 5px;
      color: var(--text-color);
      padding: 8px 16px;
      font-size: 14px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .feature-button:hover {
      background-color: var(--hover-color);
    }

    .message {
      display: flex;
      padding: 20px;
      margin: 10px 0;
      border-radius: 8px;
      line-height: 1.6;
      background-color: transparent;
      border: 1px solid rgba(255, 255, 255, 0.1);
      opacity: 0;
      transform: translateY(20px);
      animation: fadeIn 0.3s ease forwards;
      will-change: transform, opacity;
      width: 100%;
      max-width: 800px;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      position: relative;
    }

    .message.user {
      border-color: rgba(124, 58, 237, 0.3);
      margin-left: auto;
      flex-direction: row-reverse;
    }

    .message.bot {
      border-color: rgba(16, 163, 127, 0.3);
      margin-right: auto;
    }

    .message.system {
      border-color: rgba(255, 68, 68, 0.3);
      color: #ff4444;
      margin: 10px auto;
    }

    .content-wrapper {
      display: flex;
      gap: 15px;
      width: 100%;
      align-items: flex-start;
      position: relative;
    }

    .message.user .content-wrapper {
      flex-direction: row-reverse;
    }

    .message.user .content {
      text-align: right;
    }

    .avatar {
      flex-shrink: 0;
      width: 36px;
      height: 36px;
      border-radius: 4px;
      background-color: transparent;
      border: 2px solid var(--primary-color);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }

    .message.user .avatar {
      border-color: #7c3aed;
    }

    .message.bot .avatar {
      border-color: var(--primary-color);
    }

    .content {
      flex-grow: 1;
      overflow-x: auto;
      padding-right: 10px;
    }

    .content pre {
      background-color: rgba(30, 30, 30, 0.6);
      border-radius: 4px;
      padding: 15px;
      margin: 10px 0;
      overflow-x: auto;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 14px;
      line-height: 1.4;
      border: 1px solid var(--border-color);
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
    }

    .content code {
      font-family: 'Consolas', 'Monaco', monospace;
      background-color: rgba(255, 255, 255, 0.1);
      padding: 2px 4px;
      border-radius: 3px;
      font-size: 0.9em;
    }

    .content p {
      margin: 0 0 10px 0;
      white-space: pre-wrap;
      word-break: break-word;
    }

    .content p:last-child {
      margin-bottom: 0;
    }

    .content ul, .content ol {
      margin: 10px 0;
      padding-left: 20px;
    }

    .content li {
      margin: 5px 0;
    }

    .content table {
      border-collapse: collapse;
      margin: 10px 0;
      width: 100%;
    }

    .content th, .content td {
      border: 1px solid var(--border-color);
      padding: 8px;
      text-align: left;
    }

    .content th {
      background-color: var(--hover-color);
    }

    .input-container {
      position: relative;
      padding: 20px 10%;
      background-color: var(--secondary-color);
      border-top: 1px solid var(--border-color);
    }

    .input-wrapper {
      display: flex;
      align-items: flex-end;
      position: relative;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
    }

    .chat-input {
      flex: 1;
      border: 1px solid var(--border-color);
      background-color: var(--hover-color);
      border-radius: 8px;
      color: var(--text-color);
      padding: 15px 50px 15px 15px;
      font-size: 16px;
      resize: none;
      min-height: 56px;
      max-height: 200px;
      overflow-y: auto;
      line-height: 1.5;
      transition: all 0.3s ease;
    }

    .chat-input:focus {
      outline: none;
      border-color: var(--primary-color);
    }

    .send-btn {
      position: absolute;
      right: 10px;
      bottom: 10px;
      background-color: transparent;
      border: none;
      color: var(--text-color);
      font-size: 20px;
      cursor: pointer;
      padding: 5px;
      border-radius: 4px;
    }

    .send-btn:hover {
      color: var(--primary-color);
    }

    .disclaimer {
      text-align: center;
      font-size: 12px;
      color: #8e8ea0;
      margin-top: 15px;
      padding: 0 20px;
    }

    .loading {
      display: flex;
      padding: 20px;
      border-radius: 8px;
      background-color: rgba(68, 70, 84, 0.8);
      line-height: 1.6;
    }

    .loading-animation {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .loading-dot {
      width: 10px;
      height: 10px;
      background-color: var(--primary-color);
      border-radius: 50%;
      animation: bounce 1.5s infinite ease-in-out;
    }

    .loading-dot:nth-child(1) { animation-delay: 0s; }
    .loading-dot:nth-child(2) { animation-delay: 0.2s; }
    .loading-dot:nth-child(3) { animation-delay: 0.4s; }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .history-tab {
      position: absolute;
      top: 50px;
      left: 10px;
      width: 200px;
      background-color: #2c2c2c;
      border: 1px solid #444;
      padding: 10px;
      max-height: 300px;
      overflow-y: auto;
      color: #fff;
      z-index: 100;
    }

    .history-tab div {
      margin-bottom: 5px;
      cursor: pointer;
    }

    .history-tab div:hover {
      background-color: #444;
    }

    @media (max-width: 768px) {
      .sidebar {
        position: absolute;
        height: 100%;
        z-index: 100;
      }

      .chat-container, .input-container {
        padding: 20px 5%;
      }

      .feature-buttons {
        flex-direction: column;
      }

      .anime-bg::before, .anime-bg::after {
        animation: none;
      }
    }

    code {
      background-color: rgba(0, 0, 0, 0.2);
      padding: 2px 4px;
      border-radius: 4px;
      font-family: monospace;
    }

    pre {
      background-color: rgba(0, 0, 0, 0.2);
      padding: 10px;
      border-radius: 4px;
      overflow-x: auto;
      margin: 10px 0;
    }

    pre code {
      background-color: transparent;
      padding: 0;
    }

    @keyframes fadeIn {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .copy-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      color: var(--text-color);
      padding: 5px 10px;
      border-radius: 4px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 12px;
      transition: all 0.2s ease;
    }

    .message.user .copy-btn {
      right: auto;
      left: 10px;
    }

    .copy-btn:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .copy-btn svg {
      width: 14px;
      height: 14px;
    }

    .copy-btn.copied {
      background: var(--primary-color);
      border-color: var(--primary-color);
    }

    .message.user .copy-btn.copied {
      background: #7c3aed;
      border-color: #7c3aed;
    }

    /* Button animations */
    @keyframes pulseGlow {
      0% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.1); }
      70% { box-shadow: 0 0 0 10px rgba(255, 255, 255, 0); }
      100% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0); }
    }

    @keyframes rippleEffect {
      0% { transform: scale(1); }
      50% { transform: scale(0.95); }
      100% { transform: scale(1); }
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Common button styles */
    .animated-button {
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
      transform: translateZ(0);
    }

    .animated-button::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      transition: width 0.6s ease, height 0.6s ease;
    }

    .animated-button:hover::before {
      width: 300%;
      height: 300%;
    }

    /* Apply animations to specific buttons */
    .new-chat-btn {
      animation: slideIn 0.5s ease;
    }

    .new-chat-btn:hover {
      transform: translateY(-2px);
      animation: pulseGlow 1.5s infinite;
    }

    .send-btn {
      transition: all 0.3s ease;
    }

    .send-btn:hover {
      transform: scale(1.1) rotate(15deg);
    }

    .send-btn:active {
      transform: scale(0.95);
    }

    .copy-btn {
      transition: all 0.3s ease;
    }

    .copy-btn:hover {
      transform: translateY(-2px);
    }

    .copy-btn.copied {
      animation: rippleEffect 0.5s ease;
    }

    .suggestion-btn {
      animation: slideIn 0.5s ease;
      animation-fill-mode: both;
    }

    .suggestions-container .suggestion-btn:nth-child(1) { animation-delay: 0.1s; }
    .suggestions-container .suggestion-btn:nth-child(2) { animation-delay: 0.2s; }
    .suggestions-container .suggestion-btn:nth-child(3) { animation-delay: 0.3s; }
    .suggestions-container .suggestion-btn:nth-child(4) { animation-delay: 0.4s; }
    .suggestions-container .suggestion-btn:nth-child(5) { animation-delay: 0.5s; }

    .suggestion-btn:hover {
      transform: translateX(10px);
      background: rgba(255, 255, 255, 0.2);
    }

    /* Feature buttons animation */
    .feature-button {
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
      animation: slideIn 0.5s ease;
      transform: translateZ(0);
    }

    .feature-button::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(
        45deg,
        transparent,
        rgba(255, 255, 255, 0.1),
        transparent
      );
      transform: rotate(45deg);
      transition: all 0.3s ease;
      opacity: 0;
    }

    .feature-button:hover::after {
      opacity: 1;
      transform: rotate(45deg) translate(50%, 50%);
    }

    .feature-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    /* Mini Bot Character Styles */
    .mini-bot {
      width: 120px;
      height: 120px;
      position: relative;
      margin: 0 auto 30px;
      animation: floatBot 3s ease-in-out infinite;
      cursor: pointer;
      transition: transform 0.3s ease;
    }

    .mini-bot:hover {
      transform: scale(1.1);
    }

    .mini-bot.clicked {
      animation: botJump 0.5s ease;
    }

    @keyframes floatBot {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-15px); }
    }

    @keyframes botJump {
      0% { transform: scale(1); }
      50% { transform: scale(0.8) translateY(-20px); }
      75% { transform: scale(1.2) translateY(10px); }
      100% { transform: scale(1); }
    }

    .bot-head {
      width: 50px;
      height: 50px;
      background-color: #A4C639;
      border-radius: 50% 50% 0 0;
      position: relative;
    }

    .bot-head::before,
    .bot-head::after {
      content: '';
      position: absolute;
      width: 10px;
      height: 10px;
      background-color: #A4C639;
      top: -10px;
      border-radius: 50%;
    }

    .bot-head::before {
      left: 10px;
    }

    .bot-head::after {
      right: 10px;
    }

    .bot-body {
      width: 60px;
      height: 60px;
      background-color: #A4C639;
      border-radius: 0 0 15px 15px;
      position: relative;
    }

    .bot-body::before,
    .bot-body::after {
      content: '';
      position: absolute;
      width: 15px;
      height: 15px;
      background-color: #A4C639;
      bottom: -15px;
      border-radius: 50%;
    }

    .bot-body::before {
      left: 10px;
    }

    .bot-body::after {
      right: 10px;
    }

    .bot-eyes {
      width: 10px;
      height: 10px;
      background-color: white;
      border-radius: 50%;
      position: absolute;
      top: 15px;
    }

    .bot-eyes.left {
      left: 10px;
    }

    .bot-eyes.right {
      right: 10px;
    }

    .bot-mouth {
      width: 20px;
      height: 5px;
      background-color: white;
      border-radius: 5px;
      position: absolute;
      top: 35px;
      left: 50%;
      transform: translateX(-50%);
    }

    .bot-arms {
      top: 10px;
    }

    .bot-arm {
      width: 25px;
      height: 5px;
      background: #388E3C;
      border-radius: 2px;
    }

    .bot-arm.left {
      left: 10px;
    }

    .bot-arm.right {
      right: 10px;
    }

    .bot-greeting {
      opacity: 0;
      animation: fadeIn 0.5s ease 0.5s forwards;
      text-align: center;
      font-size: 1.2em;
      margin-bottom: 20px;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Company Info Popup Styles */
    .company-info {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
      z-index: 1001;
    }

    .company-info.show {
      display: block;
    }

    .company-info h2 {
      color: #333;
      margin-bottom: 10px;
    }

    .company-info p {
      color: #555;
      margin-bottom: 15px;
    }

    .close-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: none;
      border: none;
      cursor: pointer;
      font-size: 20px;
      color: #333;
    }

  </style>
</head>
<body>
  <div class="anime-bg"></div>
  <div class="container">
    <div class="sidebar" id="sidebar">
      <button class="new-chat-btn animated-button" id="new-chat">
        <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">
          <line x1="12" y1="5" x2="12" y2="19"></line>
          <line x1="5" y1="12" x2="19" y2="12"></line>
        </svg>
        New Chat
      </button>
      <button class="clear-history-btn" id="clear-history">
        Clear History
      </button>
      <div class="suggestion-title">Try asking about</div>
      <div class="suggestions" id="suggestions"></div>
    </div>

    <div class="main">
      <button class="toggle-sidebar" id="toggle-sidebar">
        <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>

      <div class="chat-header" id="chat-header">Girish Lade</div>

      <div class="chat-container" id="chat-container">
        <div class="empty-chat" id="empty-chat">
          <div class="mini-bot">
            <div class="bot-head">
              <div class="bot-head::before"></div>
              <div class="bot-head::after"></div>
            </div>
            <div class="bot-body">
              <div class="bot-body::before"></div>
              <div class="bot-body::after"></div>
            </div>
            <div class="bot-eyes left"></div>
            <div class="bot-eyes right"></div>
            <div class="bot-mouth"></div>
          </div>
          <div class="bot-greeting">Hi! I'm your AI buddy. Let's chat about anything!</div>
          <h2>Welcome to Girish Lade Chatbot!</h2>
          <p>Try asking one of these questions:</p>
          <div class="feature-buttons">
            <button class="feature-button animated-button" data-query="Explain quantum computing in simple terms">Explain quantum computing</button>
            <button class="feature-button animated-button" data-query="Write a short story about a robot who discovers emotions">Creative writing</button>
            <button class="feature-button animated-button" data-query="Help me solve this calculus problem: integrate x^2 * sin(x)">Math help</button>
            <button class="feature-button animated-button" data-query="Suggest healthy meal ideas for a busy week">Meal planning</button>
          </div>
        </div>
      </div>

      <div class="input-container">
        <div class="input-wrapper">
          <textarea class="chat-input" id="chat-input" placeholder="Message Girish Lade..." rows="1"></textarea>
          <button class="send-btn" id="send-btn">
            <svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">
              <line x1="22" y1="2" x2="11" y2="13"></line>
              <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
            </svg>
          </button>
        </div>
        <div class="disclaimer">Girish Lade can make mistakes. Consider checking important information.</div>
      </div>
    </div>

    <div class="history-tab" id="history-tab" style="display: none;">
      <div id="history-container"></div>
    </div>

    <div class="company-info">
      <button class="close-btn">×</button>
      <h2>About Us</h2>
      <p>Company Name: Girish Lade</p>
      <p>Founded in: 2025 by Girish Lade</p>
    </div>

  </div>

  <script>
    const OPENROUTER_API_KEY = "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";
    const MODEL = "deepseek/deepseek-chat:free";

    let chatHistory = [];
    let isLoading = false;

    const suggestionTopics = [
      "Tell me about the latest advances in AI",
      "How do I improve my coding skills?",
      "What are some creative writing exercises?",
      "Explain blockchain technology",
      "How does machine learning work?",
      "Give me tips for learning a new language",
      "What are the best practices for web design?",
      "Can you explain neural networks?",
      "What are some healthy breakfast ideas?",
      "How to start meditation?",
      "Tips for better time management",
      "Explain quantum computing",
      "How to improve problem-solving skills?",
      "What are the basics of digital marketing?",
      "Tips for sustainable living",
      "How to start a small business?",
      "Explain cloud computing concepts",
      "Best practices for cybersecurity",
      "How to improve public speaking?",
      "Tips for effective communication"
    ];

    function debounce(func, wait) {
      let timeout;
      return function executedFunction(...args) {
        const later = () => {
          clearTimeout(timeout);
          func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
      };
    }

    async function init() {
      const toggleSidebar = document.getElementById('toggle-sidebar');
      const chatInput = document.getElementById('chat-input');
      const sendBtn = document.getElementById('send-btn');
      const newChatBtn = document.getElementById('new-chat');
      const clearHistoryBtn = document.getElementById('clear-history');
      const chatContainer = document.querySelector('.chat-container');

      // Initialize empty state if no history
      if (!chatContainer.children.length) {
        showEmptyState();
      }

      toggleSidebar.addEventListener('click', toggleSidebarVisibility);
      chatInput.addEventListener('keydown', handleKeyDown);
      chatInput.addEventListener('input', debouncedAdjustHeight);
      sendBtn.addEventListener('click', () => sendMessage());
      newChatBtn.addEventListener('click', startNewChat);
      clearHistoryBtn.addEventListener('click', clearHistory);

      document.querySelectorAll('.feature-button').forEach(button => {
        button.addEventListener('click', () => {
          chatInput.value = button.getAttribute('data-query') || '';
          debouncedAdjustHeight();
          sendMessage();
        });
      });

      loadRandomSuggestions();
      chatInput.focus();

      const botHead = document.querySelector('.bot-head');
      const botBody = document.querySelector('.bot-body');
      const companyInfo = document.querySelector('.company-info');
      const closeBtn = document.querySelector('.close-btn');
      let isScrolling = false;

      botHead.addEventListener('click', () => {
        companyInfo.classList.add('show');
      });

      botBody.addEventListener('click', () => {
        companyInfo.classList.add('show');
      });

      closeBtn.addEventListener('click', () => {
        companyInfo.classList.remove('show');
      });

      window.addEventListener('scroll', () => {
        if (!isScrolling) {
          isScrolling = true;
          setTimeout(() => {
            const scrollPosition = window.scrollY;
            const windowHeight = window.innerHeight;
            const newBottom = 20 + (scrollPosition / (document.body.scrollHeight - windowHeight)) * (windowHeight - 100);
            botHead.style.bottom = `${newBottom}px`;
            botBody.style.bottom = `${newBottom}px`;
            isScrolling = false;
          }, 100);
        }
      });
    }

    function toggleSidebarVisibility() {
      const sidebar = document.getElementById('sidebar');
      sidebar.classList.toggle('sidebar-collapsed');
    }

    function adjustInputHeight() {
      const textarea = document.getElementById('chat-input');
      textarea.style.height = 'auto';
      textarea.style.height = Math.min(textarea.scrollHeight, 200) + 'px';
    }

    const debouncedAdjustHeight = debounce(adjustInputHeight, 50);

    function loadRandomSuggestions() {
      const suggestionsContainer = document.getElementById('suggestions');
      const randomSuggestions = [...suggestionTopics]
        .sort(() => 0.5 - Math.random())
        .slice(0, 5);

      suggestionsContainer.innerHTML = '';

      randomSuggestions.forEach(suggestion => {
        const button = document.createElement('button');
        button.className = 'suggestion-btn animated-button';
        button.textContent = suggestion;
        button.addEventListener('click', () => {
          const chatInput = document.getElementById('chat-input');
          chatInput.value = suggestion;
          adjustInputHeight();
          sendMessage();
        });
        suggestionsContainer.appendChild(button);
      });
    }

    function handleKeyDown(e) {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
      }
    }

    function startNewChat() {
      chatHistory = [];
      const chatContainer = document.querySelector('.chat-container');

      // Clear chat container
      chatContainer.innerHTML = '';

      // Create company info popup
      const companyInfo = document.createElement('div');
      companyInfo.className = 'company-info';
      companyInfo.innerHTML = `
        <button class="close-btn">×</button>
        <h3>About Girish Lade</h3>
        <p>Founded in 2025 by Girish Lade, we are committed to revolutionizing AI interactions and making technology more accessible to everyone.</p>
        <p>Our mission is to create intelligent, user-friendly AI solutions that enhance human capabilities and make everyday tasks more efficient.</p>
      `;
      document.body.appendChild(companyInfo);

      // Show empty state with mini bot
      const emptyState = document.createElement('div');
      emptyState.className = 'empty-chat';

      // Add mini bot character with click handler
      const miniBot = document.createElement('div');
      miniBot.className = 'mini-bot';
      miniBot.innerHTML = `
        <div class="bot-head">
          <div class="bot-head::before"></div>
          <div class="bot-head::after"></div>
        </div>
        <div class="bot-body">
          <div class="bot-body::before"></div>
          <div class="bot-body::after"></div>
        </div>
        <div class="bot-eyes left"></div>
        <div class="bot-eyes right"></div>
        <div class="bot-mouth"></div>
      `;

      // Add click handler for company info
      miniBot.addEventListener('click', () => {
        miniBot.classList.add('clicked');
        setTimeout(() => miniBot.classList.remove('clicked'), 500);

        const companyInfo = document.querySelector('.company-info');
        companyInfo.classList.add('show');
      });

      // Add close handler for company info
      const closeBtn = companyInfo.querySelector('.close-btn');
      closeBtn.addEventListener('click', () => {
        companyInfo.classList.remove('show');
      });

      emptyState.appendChild(miniBot);

      // Add greeting with bot's personality
      const greeting = document.createElement('div');
      greeting.className = 'bot-greeting';
      greeting.textContent = "Hi! I'm your AI buddy. Let's chat about anything!";
      emptyState.appendChild(greeting);

      // Add welcome message
      const welcomeTitle = document.createElement('h2');
      welcomeTitle.textContent = 'Welcome to Girish Lade Chatbot!';
      welcomeTitle.style.animation = 'slideIn 0.5s ease';
      emptyState.appendChild(welcomeTitle);

      const welcomeText = document.createElement('p');
      welcomeText.textContent = 'Try asking one of these questions:';
      welcomeText.style.animation = 'slideIn 0.5s ease 0.2s both';
      emptyState.appendChild(welcomeText);

      // Create suggestions container
      const suggestionsDiv = document.createElement('div');
      suggestionsDiv.className = 'suggestions-container';
      suggestionsDiv.style.cssText = `
        display: flex;
        flex-direction: column;
        gap: 10px;
        margin-top: 20px;
        width: 100%;
        max-width: 600px;
      `;

      // Get 5 random suggestions
      const randomSuggestions = [...suggestionTopics]
        .sort(() => 0.5 - Math.random())
        .slice(0, 5);

      // Add suggestion buttons
      randomSuggestions.forEach((suggestion, index) => {
        const button = document.createElement('button');
        button.className = 'suggestion-btn animated-button';
        button.textContent = suggestion;
        button.style.cssText = `
          background: rgba(255, 255, 255, 0.1);
          border: 1px solid rgba(255, 255, 255, 0.2);
          color: var(--text-color);
          padding: 12px 20px;
          border-radius: 8px;
          cursor: pointer;
          text-align: left;
          transition: all 0.3s ease;
          font-size: 14px;
          width: 100%;
          animation: slideIn 0.5s ease ${index * 0.1}s both;
        `;

        // Add hover effect
        button.addEventListener('mouseenter', () => {
          button.style.background = 'rgba(255, 255, 255, 0.2)';
        });
        button.addEventListener('mouseleave', () => {
          button.style.background = 'rgba(255, 255, 255, 0.1)';
        });

        // Add click handler
        button.addEventListener('click', () => {
          const chatInput = document.getElementById('chat-input');
          chatInput.value = suggestion;
          chatInput.focus();
          sendMessage();
        });

        suggestionsDiv.appendChild(button);
      });

      emptyState.appendChild(suggestionsDiv);
      chatContainer.appendChild(emptyState);

      // Reset input
      const chatInput = document.getElementById('chat-input');
      chatInput.value = '';
      chatInput.focus();

      // Update sidebar if needed
      if (window.innerWidth <= 768) {
        const sidebar = document.getElementById('sidebar');
        sidebar.classList.add('sidebar-collapsed');
      }
    }

    async function sendMessage() {
      const input = document.getElementById('chat-input');
      const content = input.value.trim();
      const chatContainer = document.querySelector('.chat-container');

      if (!content || isLoading) return;

      try {
        isLoading = true;
        input.value = '';
        debouncedAdjustHeight();
        input.disabled = true;

        // Remove empty state if present
        const emptyState = chatContainer.querySelector('.empty-chat');
        if (emptyState) {
          emptyState.remove();
        }

        // Add user message
        addMessageToChat('user', content);

        // Update chat history
        chatHistory.push({ role: 'user', content: content });

        // Show loading state
        showLoadingAnimation();

        // Get bot response
        const response = await fetchBotResponse(content);

        // Add bot response
        hideLoadingAnimation();
        addMessageToChat('bot', response);

        // Update chat history with bot response
        chatHistory.push({ role: 'assistant', content: response });

        // Save conversation
        saveConversation();

      } catch (error) {
        console.error('Error sending message:', error);
        hideLoadingAnimation();
        addMessageToChat('system', 'An error occurred. Please try again.');
      } finally {
        isLoading = false;
        input.disabled = false;
        input.focus();
      }
    }

    function addMessageToChat(sender, content) {
      const chatContainer = document.querySelector('.chat-container');
      const wasAtBottom = chatContainer.scrollHeight - chatContainer.scrollTop === chatContainer.clientHeight;

      const messageDiv = document.createElement('div');
      messageDiv.className = `message ${sender}`;

      const contentWrapper = document.createElement('div');
      contentWrapper.className = 'content-wrapper';

      const avatar = document.createElement('div');
      avatar.className = 'avatar';
      avatar.textContent = sender === 'user' ? 'U' : 'B';

      const content_div = document.createElement('div');
      content_div.className = 'content';
      content_div.innerHTML = formatMessageContent(content);

      // Create copy button
      const copyBtn = document.createElement('button');
      copyBtn.className = 'copy-btn';
      copyBtn.innerHTML = `
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
        </svg>
        Copy
      `;

      copyBtn.addEventListener('click', async () => {
        try {
          // Get plain text content
          const tempDiv = document.createElement('div');
          tempDiv.innerHTML = content;
          const textContent = tempDiv.textContent || tempDiv.innerText;

          // Copy to clipboard
          await navigator.clipboard.writeText(textContent);

          // Show success feedback
          copyBtn.classList.add('copied');
          copyBtn.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
            </svg>
            Copied!
          `;

          // Reset after 2 seconds
          setTimeout(() => {
            copyBtn.classList.remove('copied');
            copyBtn.innerHTML = `
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
              </svg>
              Copy
            `;
          }, 2000);
        } catch (err) {
          console.error('Failed to copy:', err);
          copyBtn.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
            Error!
          `;
          setTimeout(() => {
            copyBtn.innerHTML = `
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
              </svg>
              Copy
            `;
          }, 2000);
        }
      });

      contentWrapper.appendChild(avatar);
      contentWrapper.appendChild(content_div);
      messageDiv.appendChild(contentWrapper);
      messageDiv.appendChild(copyBtn);

      // Use DocumentFragment for better performance
      const fragment = document.createDocumentFragment();
      fragment.appendChild(messageDiv);
      chatContainer.appendChild(fragment);

      if (wasAtBottom) {
        requestAnimationFrame(() => {
          messageDiv.scrollIntoView({ behavior: 'smooth' });
        });
      }
    }

    function formatMessageContent(content) {
      if (!content) return '';

      // Convert code blocks
      content = content.replace(/```(\w+)?\n([\s\S]*?)```/g, (match, language, code) => {
        const lang = language || '';
        return `<pre><code class="language-${lang}">${escapeHtml(code.trim())}</code></pre>`;
      });

      // Convert inline code
      content = content.replace(/`([^`]+)`/g, '<code>$1</code>');

      // Convert URLs to links
      content = content.replace(/(https?:\/\/[^\s]+)/g, '<a href="$1" target="_blank" rel="noopener noreferrer">$1</a>');

      // Convert newlines to <br> tags
      content = content.replace(/\n/g, '<br>');

      return content;
    }

    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    function showLoadingAnimation() {
      isLoading = true;
      const chatContainer = document.getElementById('chat-container');
      const loadingDiv = document.createElement('div');
      loadingDiv.className = 'loading';
      loadingDiv.id = 'loading-animation';

      const avatar = document.createElement('div');
      avatar.className = 'avatar';
      avatar.textContent = 'B';

      const loadingAnimation = document.createElement('div');
      loadingAnimation.className = 'loading-animation';

      for (let i = 0; i < 3; i++) {
        const dot = document.createElement('div');
        dot.className = 'loading-dot';
        loadingAnimation.appendChild(dot);
      }

      loadingDiv.appendChild(avatar);
      loadingDiv.appendChild(loadingAnimation);
      chatContainer.appendChild(loadingDiv);
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    function hideLoadingAnimation() {
      isLoading = false;
      const loadingDiv = document.getElementById('loading-animation');
      if (loadingDiv) {
        loadingDiv.remove();
      }
    }

    async function fetchBotResponse(message) {
      try {
        const response = await fetch("https://openrouter.ai/api/v1/chat/completions", {
          method: "POST",
          headers: {
            "Authorization": `Bearer ${OPENROUTER_API_KEY}`,
            "Content-Type": "application/json",
            "HTTP-Referer": window.location.href,
          },
          body: JSON.stringify({
            "model": MODEL,
            "messages": [...chatHistory]
          })
        });

        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }

        const data = await response.json();

        if (!data.choices || !data.choices.length) {
          throw new Error('Invalid response from API');
        }

        return data.choices[0].message.content;
      } catch (error) {
        console.error('API Error:', error);
        throw new Error('Failed to get response from the chatbot');
      }
    }

    function saveConversation() {
      try {
        const conversations = loadConversations() || [];
        conversations.push([...chatHistory]);
        localStorage.setItem('conversations', JSON.stringify(conversations));
      } catch (error) {
        console.error('Error saving conversation:', error);
      }
    }

    function loadConversations() {
      try {
        const conversations = localStorage.getItem('conversations');
        return conversations ? JSON.parse(conversations) : [];
      } catch (error) {
        console.error('Error loading conversations:', error);
        return [];
      }
    }

    async function displayHistory() {
      const chatContainer = document.querySelector('.chat-container');
      chatContainer.innerHTML = '';

      const messages = await loadConversations();

      if (messages.length === 0) {
        showEmptyState();
        return;
      }

      // Use batch processing for better performance
      const fragment = document.createDocumentFragment();
      const batchSize = 10;

      for (let i = 0; i < messages.length; i += batchSize) {
        const batch = messages.slice(i, i + batchSize);

        requestAnimationFrame(() => {
          batch.forEach(msg => {
            const messageDiv = createMessageElement(msg.sender, msg.content);
            fragment.appendChild(messageDiv);
          });

          chatContainer.appendChild(fragment);
        });

        // Add small delay between batches to prevent UI blocking
        if (i + batchSize < messages.length) {
          await new Promise(resolve => setTimeout(resolve, 10));
        }
      }
    }

    function createMessageElement(sender, content) {
      const messageDiv = document.createElement('div');
      messageDiv.className = `message ${sender}`;

      const contentWrapper = document.createElement('div');
      contentWrapper.className = 'content-wrapper';

      const avatar = document.createElement('div');
      avatar.className = 'avatar';
      avatar.textContent = sender === 'user' ? 'U' : 'B';

      const content_div = document.createElement('div');
      content_div.className = 'content';
      content_div.innerHTML = formatMessageContent(content);

      contentWrapper.appendChild(avatar);
      contentWrapper.appendChild(content_div);
      messageDiv.appendChild(contentWrapper);

      return messageDiv;
    }

    function showEmptyState() {
      const chatContainer = document.querySelector('.chat-container');
      chatContainer.innerHTML = `
        <div class="empty-chat">
          <div class="mini-bot">
            <div class="bot-head">
              <div class="bot-head::before"></div>
              <div class="bot-head::after"></div>
            </div>
            <div class="bot-body">
              <div class="bot-body::before"></div>
              <div class="bot-body::after"></div>
            </div>
            <div class="bot-eyes left"></div>
            <div class="bot-eyes right"></div>
            <div class="bot-mouth"></div>
          </div>
          <div class="bot-greeting">Hi! I'm your AI buddy. Let's chat about anything!</div>
          <h2>Welcome to Girish Lade Chatbot!</h2>
          <p>Start a conversation by typing a message below.</p>
        </div>
      `;
    }

    function clearHistory() {
      localStorage.removeItem('conversations');
      const historyTab = document.getElementById('history-tab');
      historyTab.style.display = 'none';
    }

    window.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>